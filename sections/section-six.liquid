{% comment %}
  sections/section-six.liquid
  - Intentionally minimal: no CSS, no child elements.
  - Only a section wrapper and schema so it can be added in the Theme Editor.
{% endcomment %}

<section id="section-six-{{ section.id }}" class="section-six">
    <style>
    .section-six {
        position: relative;
        opacity: 0.8;
    }
    .section-six_content {
        position: absolute;
        width: 100%;
        height: 70vh;
        transform: rotate(180deg);
        background: linear-gradient(360deg, #A38C78 73.06%, rgba(201, 160, 133, 0) 100%);
        z-index: 2;
      }
      .section-six_content-bottom-inner {
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        height: 100%;
        padding: 0 20px 50px 20px;
      }
      .section-six_content-bottom {
        width: 100%;
        height: 70vh;
        background: linear-gradient(0deg, #825D39 74.46%, rgba(0, 0, 0, 0) 100%);
        position: relative;
        z-index: 2;
      }
  
      /* Underlay container (we’ll sticky its child video/canvas) */
      .section-six-video-wine-mobile {
        position: relative;
        z-index: 0 !important;     /* ensure presence even before JS runs */
      }

      .section-six-video-wine-mobile video,
        .section-six-video-wine-mobile canvas {
            z-index: 0;
            position: relative; /* or sticky/top:0 if you want it to stick */
            top: 80% !important;
        }
        .section-six-wine-mobile-h1 {
            font-family: "Utile", sans-serif; color: #ffffff;
            font-size: 36px; font-weight: 600;
          }
          .section-six-wine-mobile-p {
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            color: #FFFFF8; font-size: 16px; letter-spacing: -0.04em;
          }
          .section-six-wine-mobile-wine-btn {
            background: #fff; color: #000; border: none; padding: 0.625rem 1.25rem;
            border-radius: 20px; font-weight: 600; cursor: pointer;
          }
          .section-six-video-wine-mobile {
            overflow: unset !important;
        }
    </style>
    <div class="section-six_content"></div>
    <div id="section-six-video-wine-mobile-{{ section.id }}" class="section-six-video-wine-mobile"></div>
    <div class="section-six_content-bottom">
        <div class="section-six_content-bottom-inner" id="section-six-inner-wine-mobile-{{ section.id }}">
            <h1 class="section-six-wine-mobile-h1" id="section-six-h1-wine-mobile-{{ section.id }}">Pour more into every moment</h1>
            <p class="section-six-wine-mobile-p" id="section-six-p1-wine-mobile-{{ section.id }}">
              Be it a quiet evening or a grand celebration, our wines bring richness and artistry to every occasion because there’s something for everyone
            </p>
            <div style="margin-top: 1.25rem;">
              <button type="button" class="section-six-wine-mobile-wine-btn" tabindex="-1">EXPLORE OUR RANGE</button>
            </div>
          </div>
    </div>
    <script>
        var sectionId   = "{{ section.id }}";
        var containerId = "section-six-video-wine-mobile-" + sectionId;
        var videoSrc = "https://cdn.shopify.com/videos/c/o/v/25e8f24bf08841a6aaa2e57a7ad482f2.mp4";
        try {
          if (window.ScrollyVideo) {
            new ScrollyVideo({
              scrollyVideoContainer: containerId,
              src: videoSrc,
              cover: true,
              sticky: false,
              overflow: true,
            });
          }
        } catch (e) {
          console.warn("[SV4] ScrollyVideo error:", e);
        }
        var innerSel5 = "#section-six-inner-wine-mobile-" + sectionId;
        var overlaySel5 = ".section-six_content-bottom";
        var overlayEl5 = document.querySelector(overlaySel5);
        var innerEl5 = document.querySelector(innerSel5);
        if (window.gsap && window.ScrollTrigger && innerEl5) {
            gsap.registerPlugin(ScrollTrigger);
            gsap.set(innerEl5, { opacity: 0 });
    
            gsap.to(innerSel5, {
              scrollTrigger: {
                trigger: overlayEl5,
                start: 'top center',
                end: 'bottom center',
                scrub: false,
                markers: false,
                onEnter: () => {
                  gsap.to(innerSel5, {
                    opacity: 1,
                    duration: 1.2,
                    ease: 'power2.out'
                  });
                },
                onLeaveBack: () => {
                  gsap.to(innerSel5, {
                    opacity: 0,
                    duration: 0.6,
                    ease: 'power2.in'
                  });
                }
              }
            });
          } else {
            console.warn('[SV4] GSAP/ScrollTrigger missing — inner fade skipped.');
          }
          gsap.timeline({
            scrollTrigger: {
              trigger: '.section-six',
              start: 'top 40%',
              end: 'bottom 50%',
              scrub: true,
              markers: false,
              onEnter: () => {
                gsap.to('.section-six', {
                  opacity: 1,
                  duration: 0.5,
                  ease: 'power2.out'
                });
              },
              onEnterBack: () => {
                gsap.to('.section-six', {
                  opacity: 1,
                  duration: 0.5,
                  ease: 'power2.in'
                });
              },
              onLeave: () => {
                gsap.to('.section-six', {
                  opacity: 0.8,
                  duration: 0.5,
                  ease: 'power2.in'
                });
              },
              onLeaveBack: () => {
                gsap.to('.section-six', {
                  opacity: 0.8,
                  ease: 'power2.out'
                });
              }
            }
          })
    </script>
</section>

{% schema %}
{
  "name": "Section Three",
  "settings": [],
  "blocks": [],
  "presets": [
    {
      "name": "Section Three",
      "category": "Custom"
    }
  ]
}
{% endschema %}
